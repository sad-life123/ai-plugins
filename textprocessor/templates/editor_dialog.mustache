{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template aiplacement_textprocessor/editor_dialog

    Template for the TextProcessor dialog in editors.

    Context variables:
    * contextid - Context ID
    * templates - Array of template options

    Example context (json):
    {
        "contextid": 1,
        "templates": [
            {"value": "document_to_html", "name": "Document to HTML", "selected": true}
        ]
    }
}}
<div class="textprocessor-dialog">
    <div class="textprocessor-loading hidden text-center p-3">
        <span class="spinner-border spinner-border-sm" role="status"></span>
        {{#str}}processing, aiplacement_textprocessor{{/str}}
    </div>

    <div class="textprocessor-form">
        <!-- Template Selection -->
        <div class="form-group mb-3">
            <label for="textprocessor-template" class="font-weight-bold">
                {{#str}}template, aiplacement_textprocessor{{/str}}
            </label>
            <select name="template" id="textprocessor-template" class="form-control">
                {{#templates}}
                <option value="{{value}}" {{#selected}}selected{{/selected}}>{{name}}</option>
                {{/templates}}
            </select>
        </div>

        <!-- Custom Prompt (hidden by default) -->
        <div class="form-group mb-3 hidden">
            <label for="textprocessor-customprompt" class="font-weight-bold">
                {{#str}}customprompt, aiplacement_textprocessor{{/str}}
            </label>
            <textarea name="customprompt" id="textprocessor-customprompt" 
                class="form-control" rows="3"
                placeholder="{{#str}}customprompt_placeholder, aiplacement_textprocessor{{/str}}"></textarea>
        </div>

        <!-- File Upload -->
        <div class="form-group mb-3">
            <label for="textprocessor-file" class="font-weight-bold">
                {{#str}}upload_file, aiplacement_textprocessor{{/str}}
            </label>
            <input type="file" name="file" id="textprocessor-file" 
                class="form-control-file"
                accept=".pdf,.docx,.doc,.txt,.rtf">
            <small class="form-text text-muted">
                {{#str}}supported_files, aiplacement_textprocessor{{/str}}
            </small>
        </div>

        <div class="text-center text-muted mb-2">
            — {{#str}}or, core{{/str}} —
        </div>

        <!-- Text Input -->
        <div class="form-group mb-3">
            <label for="textprocessor-text" class="font-weight-bold">
                {{#str}}text_input, aiplacement_textprocessor{{/str}}
            </label>
            <textarea name="text" id="textprocessor-text" 
                class="form-control" rows="6"
                placeholder="{{#str}}text_input_placeholder, aiplacement_textprocessor{{/str}}"></textarea>
        </div>
    </div>
</div>